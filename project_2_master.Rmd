---
title: "Diamonds Group Project 2"
author: "Vinnie Gambotto, Steve Meadows, Sai Sreyaa Krishna Mallemala"
date: "`r Sys.Date()`"
output: 
   html_document:
    theme: cosmo
    toc: yes
    toc_float:
      collapsed: true
    code_folding: hide
    number_sections: true
    css: styles.css
editor_options: 
  markdown: 
    wrap: 72

---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

<h1>Predicting Educational Success</h1>

## Introduction

Understanding the factors that contribute to students’ academic success has
become increasingly important, especially as schools, families, and community
partners seek effective ways to support K–12 learners. In this project, we
analyze data from the Parent and Family Involvement (PFI) in Education Survey, a
nationally representative dataset collected by the U.S. Census Bureau, to
explore relationships between family engagement, school choice, and student
academic outcomes.

Our goal is to identify which aspects of family involvement—such as
participation in school activities, communication with teachers, assistance with
homework, and perceptions of school quality—are most strongly associated with
markers of academic success. Using a range of Generalized Linear Models (GLMs)
and classification tools, including logistic regression, multinomial regression,
Poisson regression, and Linear and Quadratic Discriminant Analysis (LDA/QDA), we
aim to build predictive models that highlight the most influential variables.

By applying these statistical learning methods through the tidymodels framework,
we address the broader research question:

**Which family and school-related factors best predict student academic success, and how can these insights guide effective support strategies for K–12 students?**

The final results will be presented in a concise report that summarizes both our
modeling process and our key findings. Ultimately, our analysis is designed to
provide actionable insights for GVSU’s K–12 Connect initiative, helping inform
recommendations that support students, empower families, and strengthen
school–family partnerships.

```{r loading and preprocessing, include=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
library(readxl)
library(dplyr)

df_2019 <- read_excel("pfi-data.xlsx", sheet = "curated 2019")
df_2016 <- read_excel("pfi-data.xlsx", sheet = "curated 2016")

df_2016 <- df_2016 %>%
  mutate(
    ALLGRADEX_2016raw = ALLGRADEX,  # keep original
    ALLGRADEX_std = case_when(
      ALLGRADEX == "K" ~ 0,                          # Kindergarten
      ALLGRADEX %in% as.character(1:12) ~ as.numeric(ALLGRADEX),
      TRUE ~ NA_real_
    )
  )

df_2019 <- df_2019 %>%
  mutate(
    ALLGRADEX_2019raw = ALLGRADEX,
    ALLGRADEX_std = case_when(
      ALLGRADEX %in% c(2, 3) ~ 0,                       # both K flavors → Kindergarten
      ALLGRADEX >= 4 & ALLGRADEX <= 15 ~ ALLGRADEX - 3, # 1st–12th → 1–12
      TRUE ~ NA_real_
    )
  )

# Remove original ALLGRADEX from both dfs
df_2016_clean <- df_2016 %>%
  select(-ALLGRADEX) %>%
  mutate(year = 2016)

df_2019_clean <- df_2019 %>%
  select(-ALLGRADEX) %>%
  mutate(year = 2019)

# Keep only shared columns (ALLGRADEX_std is shared & aligned)
common_vars <- intersect(names(df_2016_clean), names(df_2019_clean))

df_2016_common <- df_2016_clean %>%
  select(all_of(common_vars))

df_2019_common <- df_2019_clean %>%
  select(all_of(common_vars))

combined <- bind_rows(df_2016_common, df_2019_common)

# filtering for high school students only
df <- combined %>%
  filter(ALLGRADEX_std >= 9 & ALLGRADEX_std <= 12)

```



